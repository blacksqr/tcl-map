<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Id: demo_define_function.html,v 1.4 2005/12/05 04:57:05 dav480 Exp $ -->
<html>
  <head>
    <meta name="generator"
    content="HTML Tidy for Windows (vers 1 September 2005), see www.w3.org" />
    <title>Defining nap functions</title>
  </head>
  <body>
  <center>
    <h2>Defining nap functions</h2>
  </center>The final command in the procedure should be a nap command
  defining the result.
  <p>The following procedure defines a NAP function 
  <code>sind()</code> to be 
  <var>sin(angle in degrees)</var>:</p>
  <pre>
% proc sind x {nap &quot;sin(x / 180p-1)&quot;}
% [nap &quot;sind {0 30 90}&quot;]; # Try it
0 0.5 1
</pre>
  <p>The following procedure defines a NAP function giving zonal means
  from a matrix with latitude/longitude coordinate variables:</p>
  <pre>
% proc zonal_mean matrix {
      nap &quot;latitude  = coordinate_variable(matrix, 0)&quot;
      nap &quot;longitude = coordinate_variable(matrix, 1)&quot;
      nap &quot;a = area_on_globe(latitude, longitude)&quot;
      nap &quot;sum(a * matrix, 1) / sum (a, 1)&quot;
}
% pwd
/sol/home/dav480/tcl_nap/data
% nap &quot;z = [nap_get net zht_r21.nc zht]&quot;
::NAP::35-35
% nap &quot;zm = zonal_mean(z)&quot;
::NAP::201-201
% $zm a
::NAP::201-201  f64  MissingValue: NaN  References: 1  Unit: (NULL)
Dimension 0   Size: 56     Name: latitude  Coordinate-variable:
::NAP::47-47
Value:
2320.95 2270.02 2165.5 1940.87 1534.45 1004.65 ..
% plot_nao zm
.win0
</pre>
  <table width="100%" border="0" cellspacing="0" cellpadding="2"
  bgcolor="#737B9C">
    <tr>
      <td align="center">
        <font color="#FFFFFF" size="-2">
          <span class="titlebar">
          <b>Author:</b> 
          <a href="http://sourceforge.net/users/dav480/">Harvey
          Davies</a> &#160; &#160; &#160; © 2005, CSIRO Australia.
          &#160; &#160; &#160; 
          <a href="http://www.csiro.au/legalnotices/disclaimer.html">Legal
          Notice and Disclaimer</a>
          <br />
          <b>CVS Version Details:</b> $Id: demo_define_function.html,v
          1.2 2005/03/15 01:06:52 dav480 Exp $</span>
        </font>
      </td>
    </tr>
  </table></body>
</html>
