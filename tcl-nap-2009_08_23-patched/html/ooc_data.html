<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Id: ooc_data.html,v 1.6 2006/02/08 06:00:01 dav480 Exp $ -->
<html>
  <head>
    <meta name="generator"
    content="HTML Tidy for Windows (vers 1 September 2005), see www.w3.org" />
    <title>OOC Methods: Data</title>
  </head>
  <body>
  <center>
    <h2>OOC Methods which return Data Values (with or without
    metadata)</h2>
  </center>
  <h3>Table of Contents</h3>
  <ol>
    <li>
      <a href="#all">Method 
      <code>all</code></a>
    </li>
    <li>
      <a href="#value">Method 
      <code>value</code></a>
    </li>
    <li>
      <a href="#default_method">Default method</a>
    </li>
    <li>
      <a href="#format_strings">Format Conversion Strings</a>
    </li>
  </ol>
  <h3>
    <a name="all">Method <code>all</code></a>
  </h3>
  <p>
  <var>ooc_name</var> 
  <code>all</code> 
  <code>-format</code> 
  <var>format</var> 
  <code>-columns</code> 
  <var>int</var> 
  <code>-lines</code> 
  <var>int</var> 
  <code>-missing</code> 
  <var>text</var> 
  <code>-keep</code>
  <br /></p>
  <p>This provides both data and metadata from a NAO. However it does
  not provide 
  <em>all</em> information despite the name!</p>
  <p>The following switches are allowed:
  <br />
  <code>-format</code> 
  <var>format</var>: C format (default: Use internal format if any,
  else &quot;&quot; meaning automatic)
  <br />
  <code>-columns</code> 
  <var>int</var>: maximum # columns (default: 6) (
  <code>-1</code>: no limit)
  <br />
  <code>-lines</code> 
  <var>int</var>: maximum # lines (default: 20) (
  <code>-1</code>: no limit)
  <br />
  <code>-list</code>: print in tcl list form (using braces) e.g. &quot;<code>{1 9 2}</code>&quot;
  <br />
  <code>-missing</code> 
  <var>text</var>: text printed for missing value (default:
  &quot;_&quot;)
  <br />
  <code>-keep</code>: Do not delete NAO with reference count of 0</p>
  <p>The 
  <code>all</code> method provides the same information as the two
  commands:
  <br />
  <var>ooc_name</var> 
  <code>header</code>
  <br />
  <var>ooc_name</var> 
  <code>value</code> 
  <code>-format</code> 
  <var>format</var> 
  <code>-columns</code> 
  <var>int</var> 
  <code>-lines</code> 
  <var>int</var> 
  <code>-missing</code> 
  <var>text</var>
  <br /></p>
  <h4>Example</h4>
  <pre>
% [nap &quot;{3#2 2#_ -9}&quot;] all -miss n/a
::NAP::39-39  i32  MissingValue: -2147483648  References: 0  Unit:
(NULL)
Dimension 0   Size: 6      Name: (NULL)    Coordinate-variable: (NULL)
Value:
2 2 2 n/a n/a -9
</pre>
  <h3>
    <a name="value">Method <code>value</code></a>
  </h3>
  <p>
  <var>ooc_name</var> 
  <code>value</code> 
  <code>-format</code> 
  <var>format</var> 
  <code>-columns</code> 
  <var>int</var> 
  <code>-lines</code> 
  <var>int</var> 
  <code>-missing</code> 
  <var>text</var> 
  <code>-keep</code>
  <br /></p>
  <p>This returns data values. The default value is 
  <code>-1</code> for both the switches 
  <code>-columns</code> and 
  <code>-lines</code>, giving the entire array.</p>
  <p>The following switches are allowed:
  <br />
  <code>-format</code> 
  <var>format</var>: C format (default: Use internal format if any,
  else &quot;&quot; meaning automatic)
  <br />
  <code>-columns</code> 
  <var>int</var>: maximum # columns (default: 
  <code>-1</code> i.e. no limit)
  <br />
  <code>-lines</code> 
  <var>int</var>: maximum # lines (default: 
  <code>-1</code> i.e. no limit)
  <br />
  <code>-list</code>: print in tcl list form (using braces) e.g. &quot;<code>{1 9 2}</code>&quot;
  <br />
  <code>-missing</code> 
  <var>text</var>: text printed for missing value (default:
  &quot;_&quot;)
  <br />
  <code>-keep</code>: Do not delete NAO with reference count of 0</p>
  <h4>Example</h4>
  <pre>
% nap &quot;y = (0 .. 2 ... 0.5) ** 2&quot;
::NAP::61-61
% $y val -format %0.3f
0.000 0.250 1.000 2.250 4.000
</pre>
  <h3>
    <a name="default_method">Default method</a>
  </h3>
  <p>
  <var>ooc_name</var> 
  <code>-format</code> 
  <var>format</var> 
  <code>-columns</code> 
  <var>int</var> 
  <code>-lines</code> 
  <var>int</var> 
  <code>-missing</code> 
  <var>text</var> 
  <code>-keep</code>
  <br /></p>
  <p>This returns data values in a similar fashion to the 
  <code>value</code> method, except that default line and column limits
  restrict the size.</p>
  <p>The following switches are allowed:
  <br />
  <code>-format</code> 
  <var>format</var>: C format (default: Use internal format if any,
  else &quot;&quot; meaning automatic)
  <br />
  <code>-columns</code> 
  <var>int</var>: maximum # columns (default: 
  <code>6</code>) (
  <code>-1</code>: no limit)
  <br />
  <code>-lines</code> 
  <var>int</var>: maximum # lines (default: 
  <code>20</code>) (
  <code>-1</code>: no limit)
  <br />
  <code>-list</code>: print in tcl list form (using braces) e.g. &quot;<code>{1 9 2}</code>&quot;
  <br />
  <code>-missing</code> 
  <var>text</var>: text printed for missing value (default: 
  <code>&quot;_&quot;</code>)
  <br />
  <code>-keep</code>: Do not delete NAO with reference count of 0</p>
  <h4>Examples</h4>The following example shows why and how to use
  switch 
  <code>-columns</code> (abbreviated to 
  <code>-c</code>):
  <pre>
% nap &quot;m = reshape(0 .. 99, {10 12})&quot;
::NAP::50-50
% $m
 0  1  2  3  4  5 ..
12 13 14 15 16 17 ..
24 25 26 27 28 29 ..
36 37 38 39 40 41 ..
48 49 50 51 52 53 ..
60 61 62 63 64 65 ..
72 73 74 75 76 77 ..
84 85 86 87 88 89 ..
96 97 98 99  0  1 ..
 8  9 10 11 12 13 ..
% $m -c -1
 0  1  2  3  4  5  6  7  8  9 10 11
12 13 14 15 16 17 18 19 20 21 22 23
24 25 26 27 28 29 30 31 32 33 34 35
36 37 38 39 40 41 42 43 44 45 46 47
48 49 50 51 52 53 54 55 56 57 58 59
60 61 62 63 64 65 66 67 68 69 70 71
72 73 74 75 76 77 78 79 80 81 82 83
84 85 86 87 88 89 90 91 92 93 94 95
96 97 98 99  0  1  2  3  4  5  6  7
 8  9 10 11 12 13 14 15 16 17 18 19
</pre>
  <p>The following example shows how to use switch 
  <code>-format</code> (abbreviated to 
  <code>-f</code>) to include a dollar prefix and display two decimal
  places:</p>
  <pre>
% [nap &quot;{15 3.2 999}&quot;] -f {$%.2f}
$15.00 $3.20 $999.00
</pre>
  <p>The following example shows how to use switch 
  <code>-list</code>:</p>
  <pre>
% [nap &quot;reshape(1.5 .. -1.5, {2 5})&quot;] -list
{
{  1.5  0.5 -0.5 -1.5  1.5 }
{  0.5 -0.5 -1.5  1.5  0.5 }
}
</pre>
  <h3>
    <a name="format_strings">Format Conversion Strings</a>
  </h3>
  <p>The 
  <code>-format</code> option (or NAO internal 
  <em>format</em> field) specifies a 
  <i>format conversion string</i> similar to that used in the standard
  Tcl 
  <code>format</code> command (which is based on the ANSI C 
  <code>sprintf()</code> function). Such strings have the form
  <br />
  <code>%</code>[
  <var>flags</var>][
  <var>width</var>][
  <code>.</code>
  <var>precision</var>]
  <var>char</var>
  <br />where:</p>
  <ul>
    <li>
    <var>flags</var> is a string containing any of the following
    characters in any order:
    <br />
    <code>-</code>: left justify
    <br />
    <code>+</code>: include sign
    <br />
    <em>space</em>: include space prefix if no sign
    <br />
    <code>0</code>: leading zeros
    <br />
    <code>#</code>: alternate form</li>
    <li>
    <var>width</var> is the minimum field width</li>
    <li>
    <var>precision</var> is the
    <ul>
      <li>minimum number of digits for 
      <code>d</code>, 
      <code>i</code>, 
      <code>o</code>, 
      <code>x</code>, 
      <code>X</code> or 
      <code>u</code> conversions.</li>
      <li>number of digits after &quot;.&quot; for 
      <code>e</code>, 
      <code>E</code> or 
      <code>f</code> conversions.</li>
      <li>number of significant digits for 
      <code>g</code> or 
      <code>G</code> conversions.</li>
    </ul></li>
    <li>
    <var>char</var> specifies conversion as in the following table:
    <table border="1">
      <tr>
        <td align="center">
          <var>char</var>
        </td>
        <th align="center">Convert to</th>
      </tr>
      <tbody>
        <tr>
          <td>d, 
          <code>i</code></td>
          <td>signed decimal integer</td>
        </tr>
        <tr valign="top">
          <td>o</td>
          <td>unsigned octal integer</td>
        </tr>
        <tr valign="top">
          <td>x, 
          <code>X</code></td>
          <td>unsigned hexadecimal integer</td>
        </tr>
        <tr valign="top">
          <td>u</td>
          <td>unsigned decimal integer</td>
        </tr>
        <tr valign="top">
          <td>c</td>
          <td>character</td>
        </tr>
        <tr valign="top">
          <td>f</td>
          <td>decimal number in form [
          <code>-</code>]
          <var>mmm</var>
          <code>.</code>
          <var>ddd</var>,
          <br />where number of 
          <var>d</var>s is specified by the 
          <var>precision</var>.
          <br />Default 
          <var>precision</var> is 6; 
          <var>precision</var> of 0 suppresses the &quot;<code>.</code>&quot;.</td>
        </tr>
        <tr valign="top">
          <td>e, 
          <code>E</code></td>
          <td>decimal number in form [
          <code>-</code>]
          <var>m</var>
          <code>.</code>
          <var>dddddd</var>
          <code>e</code>±
          <var>xx</var> or [
          <code>-</code>]
          <var>m</var>
          <code>.</code>
          <var>dddddd</var>
          <code>E</code>±
          <var>xx</var>,
          <br />where number of 
          <var>d</var>s is specified by the 
          <var>precision</var>.
          <br />Default 
          <var>precision</var> is 6; 
          <var>precision</var> of 0 suppresses the &quot;<code>.</code>&quot;.</td>
        </tr>
        <tr valign="top">
          <td>g, 
          <code>G</code></td>
          <td>
          <code>%e</code> or 
          <code>%E</code> are used if 
          <var>exponent</var> &lt; &#8722;4 or 
          <var>exponent</var> &#8805; 
          <var>precision</var>;
          <br />otherwise 
          <code>%f</code> is used.
          <br />Trailing zeros and decimal points are suppressed.</td>
        </tr>
      </tbody>
    </table></li>
  </ul>
  <p>The following example displays the same data using each of these
  codes. Note that (unlike C and the standard Tcl 
  <code>format</code> command) any data-type can be displayed with any
  code.</p>
  <pre>
% foreach code {d i o x X u c f E e g G} {
    puts &quot;$code: [[nap &quot;88 .. 92&quot;] -f &quot;%$code&quot;]&quot;
}
d: 88 89 90 91 92
i: 88 89 90 91 92
o: 130 131 132 133 134
x: 58 59 5a 5b 5c
X: 58 59 5A 5B 5C
u: 88 89 90 91 92
c: XYZ[\
f: 88.000000 89.000000 90.000000 91.000000 92.000000
E: 8.800000E+01 8.900000E+01 9.000000E+01 9.100000E+01 9.200000E+01
e: 8.800000e+01 8.900000e+01 9.000000e+01 9.100000e+01 9.200000e+01
g: 88 89 90 91 92
G: 88 89 90 91 92
</pre>
  <table width="100%" border="0" cellspacing="0" cellpadding="2"
  bgcolor="#737B9C">
    <tr>
      <td align="center">
        <font color="#FFFFFF" size="-2">
          <span class="titlebar">
          <b>Author:</b> 
          <a href="http://sourceforge.net/users/dav480/">Harvey
          Davies</a> &#160; &#160; &#160; © 2002, CSIRO Australia.
          &#160; &#160; &#160; 
          <a href="http://www.csiro.au/legalnotices/disclaimer.html">Legal
          Notice and Disclaimer</a>
          <br />
          <b>CVS Version Details:</b> $Id: ooc_data.html,v 1.2
          2004/10/25 09:01:26 dav480 Exp $</span>
        </font>
      </td>
    </tr>
  </table></body>
</html>
